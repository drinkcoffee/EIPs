---
eip: 7530
title: Prover and Decentralized Sequnecer API
description: Interface between Provers and Decentralized Sequencer Blockchain Clients
author: Peter Robinson (@drinkcoffee)
discussions-to: TODO Eth Magicians URL
status: Draft
type: Standards Track
category: Core
created: 2023-10-27
---


## Abstract

This EIP defines the interface that allows stateless zero knowledge provers to collect state information from blockchain nodes that are operating as decentralized sequencers.


## Motivation

Decentralized sequencers for zero knowledge rollups can be implemented as a blockchain. This blockchain 
holds state, and via a consensus protocol, allows nodes to come to agreement on the order of blocks. Provers can operate statelessly, fetch finalised blocks of transactions and state from the blockchain nodes. The proofs generated by the provers can then be verified on Ethereum. This type of rollup system is shown in the figure below.

![Decentralized Sequencer Architecture](../assets/eip-75XX/architecture.png)

This specification defines:

* Inilialisation configuration.
* Interface.





## Specification

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 and RFC 8174.

### Initialisation

TODO Things to be defined:

* Chain Id
* Address of Validator Set contract
* Storage slot of validator set map in Validator Set contract.
* Storage slot of the total number of validators in the Validator Set contract.
* Address of L2 to L1 bridge contract.
* Storage slot of WithdrawTrieRoot in L2 to L1 bridge contract.

### Validator Contract

TODO Explain the minimal set of information needed in the validator set contract. 

### JSON RPC APIs


#### getBlockTraceByNumber

*Parameters*: 

* Block number: Hex string.

*Returns*:

* Block information data structure:

  * Chain id: Hex string.
  * Block Header: TODO
  * Transactions: Array of TODO
  * FinalBlockStorage: Array of storage information after the last transaction in the block. This storage information includes the storage slots for:
    * WithdrawaTrieRoot for the L2 to L1 bridge.
    * Each validator that signed the block header.
    * Total number of validators.
  * TxStorageTraces: TODO Array of storage information for the start of each transaction
  * ExecutionResults: TODO 
  * StartL1QueueIndex: TODO


#### getBlockTraceByHash

*Parameters*: 

* Block hash: Hex string.

*Returns*:

* Block information data structure. See `getBlockTraceByNumber`.



## Rationale

TBD

TODO: Explain why validator contract on chain.

TODO: Explain the rationale for each piece of data being returned.

## Backwards Compatibility

No backward compatibility issues found.

## Test Cases

None.

## Reference Implementation

None.


## Security Considerations

The following security implications should be considered:

* Provers should only request blocks from decentralised sequencer blockchain nodes that are final. That is, proofs should only be generated and posted to Ethereum that represent finalised blocks from the decentralised sequencer.
* Provers implicitly trust the decentralised sequencer blockchain. Decentralised sequencer blockchain nodes could collude to generate a fork of the canonical blockchain. They could deliver state to the provers based on the fork. This specification assumes that decentralised sequencer blockchain nodes will not collude.
* The consensus protocol used by the decentralised sequencer blockchain nodes should be Byzantine Fault Tolerant. That is, it should be able to handle some faulty or malicious nodes. In this way, the prover will receive the correct state, not matter which node it communicates with, even if some of the nodes in the decentralised sequencer blockchain are malicious.

## Copyright

Copyright and related rights waived via [CC0](../LICENSE.md).
